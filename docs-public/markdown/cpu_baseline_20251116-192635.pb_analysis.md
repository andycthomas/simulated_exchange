# Flamegraph Analysis Report

**Profile:** `cpu_baseline_20251116-192635.pb`
**Generated:** 2025-11-16 19:36:36
**Profile Path:** `/home/andy/simulated_exchange/flamegraphs/cpu_baseline_20251116-192635.pb.gz`

---

## 游꿢 Executive Summary

**Top Hotspot:** `runtime.futex`
- **CPU Usage:** 12.5% (direct)
- **Priority:** HIGH

**Critical Issues:** 1 high-priority hotspots found

## 游댠 Top Performance Hotspots

### 1. 游댮 HIGH Priority

**Function:** `runtime.futex`

**Metrics:**
- Direct CPU: 12.5%
- Total CPU (with callees): 12.5%

**Issues Identified:**
- Consumes 12.5% CPU directly

### 2. 游리 MEDIUM Priority

**Function:** `internal/runtime/syscall.Syscall6`

**Metrics:**
- Direct CPU: 8.3%
- Total CPU (with callees): 8.3%

**Issues Identified:**
- Consumes 8.3% CPU directly
- System call overhead

### 3. 游릭 LOW Priority

**Function:** `encoding/json.(*decodeState).rescanLiteral`

**Metrics:**
- Direct CPU: 4.2%
- Total CPU (with callees): 4.2%

**Issues Identified:**
- JSON serialization overhead

### 4. 游릭 LOW Priority

**Function:** `encoding/json.ptrEncoder.encode`

**Metrics:**
- Direct CPU: 4.2%
- Total CPU (with callees): 12.5%

**Issues Identified:**
- JSON serialization overhead

### 5. 游리 MEDIUM Priority

**Function:** `reflect.(*rtype).Name`

**Metrics:**
- Direct CPU: 4.2%
- Total CPU (with callees): 8.3%

**Issues Identified:**
- Reflection usage (slow)

### 6. 游리 MEDIUM Priority

**Function:** `reflect.(*rtype).exportedMethods`

**Metrics:**
- Direct CPU: 4.2%
- Total CPU (with callees): 4.2%

**Issues Identified:**
- Reflection usage (slow)

### 7. 游리 MEDIUM Priority

**Function:** `reflect.Value.Field`

**Metrics:**
- Direct CPU: 4.2%
- Total CPU (with callees): 4.2%

**Issues Identified:**
- Reflection usage (slow)

### 8. 游리 MEDIUM Priority

**Function:** `runtime.findRunnable`

**Metrics:**
- Direct CPU: 4.2%
- Total CPU (with callees): 25.0%

**Issues Identified:**
- Call tree consumes 25.0% total CPU

### 9. 游릭 LOW Priority

**Function:** `syscall.Syscall`

**Metrics:**
- Direct CPU: 4.2%
- Total CPU (with callees): 8.3%

**Issues Identified:**
- System call overhead

### 10. 游릭 LOW Priority

**Function:** `encoding/json.(*decodeState).convertNumber`

**Metrics:**
- Direct CPU: 0.0%
- Total CPU (with callees): 4.2%

**Issues Identified:**
- JSON serialization overhead

## 游눠 Optimization Recommendations

### 1. 游리 Serialization

**Priority:** MEDIUM
**Issue:** JSON overhead: 8.3% CPU

**Suggested Actions:**
- Use json.RawMessage for delayed parsing
- Consider faster alternatives (easyjson, jsoniter)
- Batch JSON operations
- Use streaming for large payloads

### 2. 游리 Code Generation

**Priority:** MEDIUM
**Issue:** Reflection overhead: 12.5% CPU

**Suggested Actions:**
- Replace reflection with code generation
- Cache reflection results
- Use concrete types instead of interface{}
- Consider compile-time alternatives

## 游 Next Steps

1. **Review the flamegraph visually:**
   ```bash
   firefox /home/andy/simulated_exchange/flamegraphs/cpu_baseline_20251116-192635.svg
   ```

2. **Interactive analysis:**
   ```bash
   go tool pprof /home/andy/simulated_exchange/flamegraphs/cpu_baseline_20251116-192635.pb.gz
   # Commands: top, list <function>, web
   ```

3. **Generate additional profiles:**
   ```bash
   make profile-heap      # Memory allocation profile
   make profile-goroutine # Goroutine usage
   make profile-block     # Blocking operations
   make profile-mutex     # Lock contention
   ```

---

*Generated by AI Flamegraph Analyzer*
