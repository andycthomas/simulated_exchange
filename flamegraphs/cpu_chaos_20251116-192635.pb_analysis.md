# Flamegraph Analysis Report

**Profile:** `cpu_chaos_20251116-192635.pb`
**Generated:** 2025-11-16 19:37:19
**Profile Path:** `/home/andy/simulated_exchange/flamegraphs/cpu_chaos_20251116-192635.pb.gz`

---

## 游꿢 Executive Summary

**Top Hotspot:** `internal/runtime/syscall.Syscall6`
- **CPU Usage:** 47.6% (direct)
- **Priority:** HIGH

**Critical Issues:** 2 high-priority hotspots found

## 游댠 Top Performance Hotspots

### 1. 游댮 HIGH Priority

**Function:** `internal/runtime/syscall.Syscall6`

**Metrics:**
- Direct CPU: 47.6%
- Total CPU (with callees): 47.6%

**Issues Identified:**
- Consumes 47.6% CPU directly
- Call tree consumes 47.6% total CPU
- System call overhead

### 2. 游댮 HIGH Priority

**Function:** `runtime.futex`

**Metrics:**
- Direct CPU: 19.1%
- Total CPU (with callees): 19.1%

**Issues Identified:**
- Consumes 19.1% CPU directly

### 3. 游릭 LOW Priority

**Function:** `encoding/json.checkValid`

**Metrics:**
- Direct CPU: 4.8%
- Total CPU (with callees): 4.8%

**Issues Identified:**
- JSON serialization overhead

### 4. 游릭 LOW Priority

**Function:** `encoding/json.stateBeginValue`

**Metrics:**
- Direct CPU: 4.8%
- Total CPU (with callees): 4.8%

**Issues Identified:**
- JSON serialization overhead

### 5. 游릭 LOW Priority

**Function:** `encoding/json.(*decodeState).convertNumber`

**Metrics:**
- Direct CPU: 0.0%
- Total CPU (with callees): 9.5%

**Issues Identified:**
- JSON serialization overhead

### 6. 游릭 LOW Priority

**Function:** `encoding/json.(*decodeState).literalStore`

**Metrics:**
- Direct CPU: 0.0%
- Total CPU (with callees): 9.5%

**Issues Identified:**
- JSON serialization overhead

### 7. 游릭 LOW Priority

**Function:** `encoding/json.(*decodeState).object`

**Metrics:**
- Direct CPU: 0.0%
- Total CPU (with callees): 14.3%

**Issues Identified:**
- JSON serialization overhead

### 8. 游릭 LOW Priority

**Function:** `encoding/json.(*decodeState).scanWhile`

**Metrics:**
- Direct CPU: 0.0%
- Total CPU (with callees): 4.8%

**Issues Identified:**
- JSON serialization overhead

### 9. 游릭 LOW Priority

**Function:** `encoding/json.(*decodeState).unmarshal`

**Metrics:**
- Direct CPU: 0.0%
- Total CPU (with callees): 14.3%

**Issues Identified:**
- JSON serialization overhead

### 10. 游릭 LOW Priority

**Function:** `encoding/json.(*decodeState).value`

**Metrics:**
- Direct CPU: 0.0%
- Total CPU (with callees): 14.3%

**Issues Identified:**
- JSON serialization overhead

## 游눠 Optimization Recommendations

### 1. 游리 Memory Management

**Priority:** MEDIUM
**Issue:** GC overhead: 0.0% CPU

**Suggested Actions:**
- Reduce allocations using object pooling (sync.Pool)
- Pre-allocate slices and maps with known capacity
- Use value types instead of pointers where possible
- Consider increasing GOGC value if memory permits

### 2. 游리 Serialization

**Priority:** MEDIUM
**Issue:** JSON overhead: 9.5% CPU

**Suggested Actions:**
- Use json.RawMessage for delayed parsing
- Consider faster alternatives (easyjson, jsoniter)
- Batch JSON operations
- Use streaming for large payloads

## 游 Next Steps

1. **Review the flamegraph visually:**
   ```bash
   firefox /home/andy/simulated_exchange/flamegraphs/cpu_chaos_20251116-192635.svg
   ```

2. **Interactive analysis:**
   ```bash
   go tool pprof /home/andy/simulated_exchange/flamegraphs/cpu_chaos_20251116-192635.pb.gz
   # Commands: top, list <function>, web
   ```

3. **Generate additional profiles:**
   ```bash
   make profile-heap      # Memory allocation profile
   make profile-goroutine # Goroutine usage
   make profile-block     # Blocking operations
   make profile-mutex     # Lock contention
   ```

---

*Generated by AI Flamegraph Analyzer*
