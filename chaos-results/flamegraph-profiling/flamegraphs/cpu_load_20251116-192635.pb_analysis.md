# Flamegraph Analysis Report

**Profile:** `cpu_load_20251116-192635.pb`
**Generated:** 2025-11-16 19:28:19
**Profile Path:** `/home/andy/simulated_exchange/chaos-results/flamegraph-profiling/flamegraphs/cpu_load_20251116-192635.pb.gz`

---

## 游꿢 Executive Summary

**Top Hotspot:** `internal/runtime/syscall.Syscall6`
- **CPU Usage:** 32.4% (direct)
- **Priority:** HIGH

**Critical Issues:** 2 high-priority hotspots found

## 游댠 Top Performance Hotspots

### 1. 游댮 HIGH Priority

**Function:** `internal/runtime/syscall.Syscall6`

**Metrics:**
- Direct CPU: 32.4%
- Total CPU (with callees): 32.4%

**Issues Identified:**
- Consumes 32.4% CPU directly
- Call tree consumes 32.4% total CPU
- System call overhead

### 2. 游댮 HIGH Priority

**Function:** `runtime.mallocgc`

**Metrics:**
- Direct CPU: 8.8%
- Total CPU (with callees): 14.7%

**Issues Identified:**
- Consumes 8.8% CPU directly
- Garbage collection overhead

### 3. 游리 MEDIUM Priority

**Function:** `runtime.step`

**Metrics:**
- Direct CPU: 8.8%
- Total CPU (with callees): 8.8%

**Issues Identified:**
- Consumes 8.8% CPU directly

### 4. 游리 MEDIUM Priority

**Function:** `github.com/go-playground/validator/v10.(*validate).traverseField`

**Metrics:**
- Direct CPU: 5.9%
- Total CPU (with callees): 5.9%

**Issues Identified:**
- Consumes 5.9% CPU directly

### 5. 游리 MEDIUM Priority

**Function:** `runtime.(*unwinder).resolveInternal`

**Metrics:**
- Direct CPU: 5.9%
- Total CPU (with callees): 11.8%

**Issues Identified:**
- Consumes 5.9% CPU directly

### 6. 游릭 LOW Priority

**Function:** `encoding/json.(*decodeState).value`

**Metrics:**
- Direct CPU: 2.9%
- Total CPU (with callees): 11.8%

**Issues Identified:**
- JSON serialization overhead

### 7. 游릭 LOW Priority

**Function:** `encoding/json.checkValid`

**Metrics:**
- Direct CPU: 2.9%
- Total CPU (with callees): 2.9%

**Issues Identified:**
- JSON serialization overhead

### 8. 游릭 LOW Priority

**Function:** `sync.(*copyChecker).check`

**Metrics:**
- Direct CPU: 2.9%
- Total CPU (with callees): 2.9%

**Issues Identified:**
- Synchronization/locking detected

### 9. 游릭 LOW Priority

**Function:** `encoding/json.(*decodeState).literalStore`

**Metrics:**
- Direct CPU: 0.0%
- Total CPU (with callees): 2.9%

**Issues Identified:**
- JSON serialization overhead

### 10. 游릭 LOW Priority

**Function:** `encoding/json.(*decodeState).object`

**Metrics:**
- Direct CPU: 0.0%
- Total CPU (with callees): 11.8%

**Issues Identified:**
- JSON serialization overhead

## 游눠 Optimization Recommendations

### 1. 游리 Memory Management

**Priority:** MEDIUM
**Issue:** GC overhead: 8.8% CPU

**Suggested Actions:**
- Reduce allocations using object pooling (sync.Pool)
- Pre-allocate slices and maps with known capacity
- Use value types instead of pointers where possible
- Consider increasing GOGC value if memory permits

### 2. 游리 Concurrency

**Priority:** MEDIUM
**Issue:** Lock contention: 2.9% CPU

**Suggested Actions:**
- Reduce lock granularity (use more fine-grained locks)
- Replace mutexes with channels where appropriate
- Use sync.RWMutex for read-heavy workloads
- Consider lock-free data structures
- Run blocking profile: make profile-block

### 3. 游리 Serialization

**Priority:** MEDIUM
**Issue:** JSON overhead: 5.9% CPU

**Suggested Actions:**
- Use json.RawMessage for delayed parsing
- Consider faster alternatives (easyjson, jsoniter)
- Batch JSON operations
- Use streaming for large payloads

## 游 Next Steps

1. **Review the flamegraph visually:**
   ```bash
   firefox /home/andy/simulated_exchange/chaos-results/flamegraph-profiling/flamegraphs/cpu_load_20251116-192635.svg
   ```

2. **Interactive analysis:**
   ```bash
   go tool pprof /home/andy/simulated_exchange/chaos-results/flamegraph-profiling/flamegraphs/cpu_load_20251116-192635.pb.gz
   # Commands: top, list <function>, web
   ```

3. **Generate additional profiles:**
   ```bash
   make profile-heap      # Memory allocation profile
   make profile-goroutine # Goroutine usage
   make profile-block     # Blocking operations
   make profile-mutex     # Lock contention
   ```

---

*Generated by AI Flamegraph Analyzer*
